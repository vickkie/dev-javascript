/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/glslify-bundle@5.1.1/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import r from"/npm/murmurhash-js@1.0.0/murmurhash3_gc/+esm";import e from"/npm/glsl-token-whitespace-trim@1.0.0/+esm";import t from"/npm/glsl-tokenizer@2.1.5/string/+esm";import n from"/npm/glsl-inject-defines@1.0.3/+esm";import s from"/npm/glsl-token-defines@1.0.0/+esm";import o from"/npm/glsl-token-descope@1.0.2/+esm";import i from"/npm/glsl-token-string@1.0.1/+esm";import a from"/npm/glsl-token-scope@1.1.2/+esm";import c from"/npm/glsl-token-depth@1.1.2/+esm";import p from"/npm/shallow-copy@0.0.1/+esm";var f=function(r){for(var e={},t={},n=0;n<r.length;n++){var s=r[n];if("ident"===s.type){var o=s.data.match(u);if(o){var i=o[1],a=o[2];t[i]=t[i]||{},t[i][a]=t[i][a]||[],t[i][a].push(s)}else e[s.data]=!0}}return Object.keys(t).forEach((function(r){var n=Object.keys(t[r]);if(1!==n.length||e[r])n.forEach((function(n,s){var o=t[r][n],i=r+"_"+s;if(!e[i])for(var a=0;a<o.length;a++)o[a].data=i}));else for(var s=t[r][n[0]],o=0;o<s.length;o++)s[o].data=r})),r},u=/^([^_]+)_(\d{4,})$/;var m=r,h=e,l=t,d=n,g=s,v=o,y=f,k=i,x=a,E=c,b=function(r){var e={},t={},n={};r.forEach((function(r){var s=r.id,o=Object.keys(r.deps);n[r.id]=r,t[s]=o.length,o.forEach((function(t){var n=r.deps[t];e[n]?e[n].push(s):e[n]=[s]}))}));var s=[],o={};r.forEach((function(r){var n=r.id;e[n]||(e[n]=[]),0===t[n]&&(o[n]=s.length,s.push(n))}));for(var i=0;i<s.length;i++){var a=s[i];e[a].forEach((function(r){0==--t[r]&&(o[r]=s.length,s.push(r))}))}if(s.length!==r.length)throw new Error("cyclic dependency");return s.map((function(r){var e=n[r],t=e.deps,s={};return Object.keys(t).forEach((function(r){s[r]=0|o[t[r]]})),{id:0|o[r],deps:s,file:e.file,source:e.source,entry:e.entry}}))},j=p,w=function(r){return d(O(r).src,{GLSLIFY:1})};function O(r){if(!(this instanceof O))return new O(r);r=b(r),this.depList=r,this.depIndex=function(r,e){return r.reduce((function(r,t){return r[t[e]]=t,r}),{})}(r,"id"),this.exported={},this.cache={},this.varCounter=0,this.src=[];for(var e=0;e<r.length;e++)this.preprocess(r[e]);for(e=0;e<r.length;e++)r[e].entry&&(this.src=this.src.concat(this.bundle(r[e])));this.src=k(this.src),this.src=k(y(h(l(this.src))))}var $=O.prototype;function _(r){return/#pragma glslify:\s*export\(([^)]+)\)/.exec(r)}function I(r){return/#pragma glslify:\s*([^=\s]+)\s*=\s*require\(([^)]+)\)/.exec(r)}function L(r){return!!r&&r.reduce((function(r,e){var t=(e=e.split(/\s?=\s?/g)).pop();return e.forEach((function(e){r[e]=t})),r}),{})}$.preprocess=function(r){var e,t=l(r.source),n=[],s=null;E(t),x(t);for(var o=0;o<t.length;o++){var i=t[o];if("preprocessor"===i.type&&(e=i.data,/#pragma glslify:/.test(e))){var a=_(i.data),c=I(i.data);if(a)s=a[1],t.splice(o--,1);else if(c){var p=c[1],f=c[2].split(/\s?,\s?/g),u=f.shift().trim().replace(/^'|'$/g,"").replace(/^"|"$/g,""),m=this.depIndex[r.deps[u]];n.push({name:p,path:u,target:m,maps:L(f),index:o}),t.splice(o--,1)}}}var h=t[t.length-1];if(h&&"eof"===h.type&&t.pop(),r.entry&&(s=s||"main"),!s)throw new Error(r.file+" does not export any symbols");r.parsed={tokens:t,imports:n,exports:s}},$.bundle=function(r){var e={},t=function r(t,n){n.sort();var s=n.join(":")+":"+t.id,o="_"+m(s);t.entry&&(o="");var i=t.parsed.exports+o;if(e[i])return[i,[]];for(var a={},c=0;c<n.length;++c){var p=n[c];a[p[0]]=p[1]}var f=t.parsed.imports,u=[];for(c=0;c<f.length;++c){var h=f[c],l=h.maps,d=h.name,y=h.target,k=Object.keys(l).map((function(r){var e=l[r];if(e.match(/^\d+(?:\.\d+?)?$/g))return[r,e];var t=e.match(/^([^.]+)\.(.+)$/);return t?[r,(a[t[1]]||t[1]+o)+"."+t[2]]:[r,a[e]||e+o]})),x=r(y,k);a[d]=x[0],u.push([h.index,x[1]])}var E=t.parsed.tokens.map(j),b=g(E),w=v(E,(function(r,e){return b[r]?r:a[r]?a[r]:r+o}));u.sort((function(r,e){return e[0]-r[0]}));for(c=0;c<u.length;++c){var O=u[c];w=w.slice(0,O[0]).concat(O[1]).concat(w.slice(O[0]))}return e[i]=!0,[i,w]}(r,[])[1];return t};export{w as default};
//# sourceMappingURL=/sm/6bded6a89a957a4c8e39fae7b67b530e4a769b7c53dad227617692519c88af4c.map